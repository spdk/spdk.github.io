<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="generator" content="Doxygen 1.9.1" />
  <title>SPDK: RPMs</title>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../js/doxyboot.js"></script>
  <script type="text/javascript" src="./navtree.js"></script>
  <link href="../css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="../css/spdk.css" rel="stylesheet" type="text/css">
</head>
<body>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark px-2">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="/" aria-label="SPDK">
      <img src="/img/spdk.svg"  width="36" height="36" alt="Storage Performance Development Kit" />
    </a>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <div class="navbar-nav mr-auto">
        <a class="nav-link header-link active" href="../doc/">Documentation</a>
        <a class="nav-link header-link" href="../development/">Development</a>
        <a class="nav-link header-link" href="../community/">Community</a>
        <a class="nav-link header-link" href="../blog/">Blog</a>
      </div>
      <div class="navbar-nav ml-auto mr-3">
        <a class="nav-link header-link" href="https://github.com/spdk/spdk">
          <svg xmlns="http://www.w3.org/2000/svg" class="navbar-nav-svg"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
        </a>
      </div>
    </div>
  </nav>
  <div class="container-fluid doc">
      <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('rpms.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">RPMs </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_rpm"></a> </p>
<h1><a class="anchor" id="rpms_toc"></a>
In this document</h1>
<ul>
<li><a class="el" href="rpms.html#building_rpms">Building SPDK RPMs</a></li>
<li><a class="el" href="rpms.html#dpdk_devel">Special case for dpdk-devel</a></li>
</ul>
<h1><a class="anchor" id="building_rpms"></a>
Building SPDK RPMs</h1>
<p>To build basic set of RPM packages out of the SPDK repo simply run:</p>
<div class="fragment"><div class="line"># rpmbuild/rpm.sh</div>
</div><!-- fragment --><p>Additional configuration options can be passed directly as arguments:</p>
<div class="fragment"><div class="line"># rpmbuild/rpm.sh --with-shared --with-dpdk=/path/to/dpdk/build</div>
</div><!-- fragment --><p>There are several options that may be passed via environment as well:</p>
<ul>
<li>DEPS - Install all needed dependencies for building RPM packages. Default: "yes"</li>
<li>MAKEFLAGS - Flags passed to make</li>
<li>RPM_RELEASE - Target release version of the RPM packages. Default: 1</li>
<li>REQUIREMENTS - Extra set of RPM dependencies if deemed as needed</li>
<li>SPDK_VERSION - SPDK version. Default: currently checked out tag</li>
<li>GEN_SPEC - Orders rpm.sh to only generate a valid .spec and print it on stdout. The content of the .spec is determined based mainly on the ./configure cmdline passed to rpm.sh.</li>
<li>USE_DEFAULT_DIRS - Normally, rpm.sh will order rpmbuild to build under customizable set of directories. Since this may be not desired, especially when used together with GEN_SPEC, this option will preserve the default set of directories.</li>
</ul>
<div class="fragment"><div class="line"># DEPS=no MAKEFLAGS=&quot;-d -j1&quot; rpmbuild/rpm.sh --with-shared</div>
</div><!-- fragment --><p>By default, all RPM packages should be created under $HOME directory of the target user:</p>
<div class="fragment"><div class="line"># printf &#39;%s\n&#39; /root/rpmbuild/RPMS/x86_64/*</div>
<div class="line">/root/rpmbuild/RPMS/x86_64/spdk-devel-v21.01-1.x86_64.rpm</div>
<div class="line">/root/rpmbuild/RPMS/x86_64/spdk-dpdk-libs-v21.01-1.x86_64.rpm</div>
<div class="line">/root/rpmbuild/RPMS/x86_64/spdk-libs-v21.01-1.x86_64.rpm</div>
<div class="line">/root/rpmbuild/RPMS/x86_64/spdk-v21.01-1.x86_64.rpm</div>
<div class="line">#</div>
</div><!-- fragment --><ul>
<li>spdk - provides all the binaries, common tooling, etc.</li>
<li>spdk-devel - provides development files</li>
<li>spdk-libs - provides target lib, .pc files (&ndash;with-shared)</li>
<li>spdk-dpdk-libs - provides dpdk lib files (&ndash;with-shared|&ndash;with-dpdk)</li>
</ul>
<h1><a class="anchor" id="dpdk_devel"></a>
Special case for dpdk-devel</h1>
<p>When rpm.sh finds a bare &ndash;with-dpdk argument on the cmdline it will try to adjust the behavior of the rpmbuild to make sure only SPDK RPMs are built. Since this argument requests SPDK to be built against installed DPDK (e.g. dpdk-devel package) the spdk-dpdk-libs RPM won't be included. Moreover, the .spec will be armed with a build requirement to make sure dpdk-devel is present on the building system. The minimum required version of dpdk-devel is set to 19.11. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<ul>
        <li class="footer">Generated by
        <a href="http://www.doxygen.org/index.html">doxygen</a> 1.9.1 </li>
</ul>
</div>
</div>
</body>
</html>
