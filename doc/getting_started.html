<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- For Mobile Devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8">
  <meta name="generator" content="Doxygen 1.8.13">
  <title>SPDK: Getting Started</title>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,900" type="text/css">
  <link href="../css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="tabs.css" type="text/css">
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div class="container-fluid">
  <div id="top">  <!-- do not remove this div, it is closed by doxygen! -->
    <div class="row no-gutters">
      <div class="col-sm-12">
        <section id="nav">
          <div class="navbar navbar-default navbar-static-top banner-tabs">
            <ul class="nav navbar-nav">
              <li role="presentation">
                <a href="http://www.spdk.io/">
                  <i class="glyphicon glyphicon-home"></i>
                  <span class="box-name">home</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/releases/">
                  <i class="glyphicon glyphicon-download-alt"></i>
                  <span class="box-name">download</span>
                </a>
              </li>
              <li class="active" role="presentation">
                <a href="index.html">
                  <i class="glyphicon glyphicon-book"></i>
                  <span class="box-name">documentation</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/development/">
                  <i class="glyphicon glyphicon-wrench"></i>
                  <span class="box-name">development</span>
                </a>
              </li>
              <li role="presentation">
                <a href="https://ci.spdk.io/">
                  <i class="glyphicon glyphicon-ok"></i>
                  <span class="box-name">CI status</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/community/">
                  <i class="glyphicon glyphicon-envelope"></i>
                  <span class="box-name">community</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/blog/">
                  <i class="glyphicon glyphicon-comment"></i>
                  <span class="box-name">Blog</span>
                </a>
              </li>
              <li role="presentation">
                <a href="https://github.com/spdk/spdk/wiki/Roadmap">
                  <i class="glyphicon glyphicon-map-marker"></i>
                  <span class="box-name">Roadmap</span>
                </a>
              </li>
              <li role="presentation">
                <a href="https://github.com/spdk/spdk/wiki/News">
                  <i class="glyphicon glyphicon-bullhorn"></i>
                  <span class="box-name">News</span>
                </a>
              </li>
            </ul>
          </div>
        </section>
      </div>
    </div>
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Getting Started </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="getting_started_prerequisites"></a>
Installing Prerequisites</h1>
<p>Fedora/CentOS:</p>
<div class="fragment"><div class="line">sudo dnf install -y gcc gcc-c++ make CUnit-devel libaio-devel openssl-devel \</div><div class="line">        git astyle-devel python-pep8 lcov python clang-analyzer</div><div class="line"># Additional dependencies for RDMA (NVMe over Fabrics)</div><div class="line">sudo dnf install -y libibverbs-devel librdmacm-devel</div><div class="line"># Additional dependencies for building docs</div><div class="line">sudo dnf install -y doxygen mscgen</div></div><!-- fragment --><p>Ubuntu/Debian:</p>
<div class="fragment"><div class="line">sudo apt-get install -y gcc g++ make libcunit1-dev libaio-dev libssl-dev \</div><div class="line">        git astyle pep8 lcov clang</div><div class="line"># Additional dependencies for RDMA (NVMe over Fabrics)</div><div class="line">sudo apt-get install -y libibverbs-dev librdmacm</div><div class="line"># Additional dependencies for building docs</div><div class="line">sudo apt-get install -y doxygen mscgen</div></div><!-- fragment --><p>FreeBSD:</p>
<div class="fragment"><div class="line">sudo pkg install gmake cunit openssl git devel/astyle bash devel/pep8 \</div><div class="line">        python</div><div class="line"># Additional dependencies for building docs</div><div class="line">sudo pkg install doxygen mscgen</div></div><!-- fragment --><h1><a class="anchor" id="getting_started_source"></a>
Getting the Source Code</h1>
<div class="fragment"><div class="line">git clone https://github.com/spdk/spdk</div><div class="line">cd spdk</div><div class="line">git submodule update --init</div></div><!-- fragment --><h1><a class="anchor" id="getting_started_building"></a>
Building</h1>
<p>Linux:</p>
<div class="fragment"><div class="line">./configure</div><div class="line">make</div></div><!-- fragment --><p>FreeBSD: Note: Make sure you have the matching kernel source in /usr/src/</p>
<div class="fragment"><div class="line">./configure</div><div class="line">gmake</div></div><!-- fragment --><p>There are a number of options available for the configure script, which can be viewed by running</p>
<div class="fragment"><div class="line">./configure --help</div></div><!-- fragment --><p>Note that not all features are enabled by default. For example, RDMA support (and hence NVMe over Fabrics) is not enabled by default. You can enable it by doing the following:</p>
<div class="fragment"><div class="line">./configure --with-rdma</div><div class="line">make</div></div><!-- fragment --><h1><a class="anchor" id="getting_started_unittests"></a>
Running the Unit Tests</h1>
<p>It's always a good idea to confirm your build worked by running the unit tests.</p>
<div class="fragment"><div class="line">./unittest.sh</div></div><!-- fragment --><p>You will see several error messages when running the unit tests, but they are part of the test suite. The final message at the end of the script indicates success or failure.</p>
<h1><a class="anchor" id="getting_started_examples"></a>
Running the Example Applications</h1>
<p>Before running an SPDK application, some hugepages must be allocated and any NVMe and I/OAT devices must be unbound from the native kernel drivers. SPDK includes a script to automate this process on both Linux and FreeBSD. This script should be run as root. It only needs to be run once on the system. <em>Make sure you aren't using an NVMe device as your boot device.</em></p>
<div class="fragment"><div class="line">sudo scripts/setup.sh</div></div><!-- fragment --><p>To rebind devices back to the kernel, you can run</p>
<div class="fragment"><div class="line">sudo scripts/setup.sh reset</div></div><!-- fragment --><p>By default, the script allocates 1024 2MB hugepages. To change this number, specify NRHUGE as follows:</p>
<div class="fragment"><div class="line">sudo NRHUGE=4096 scripts/setup.sh</div></div><!-- fragment --><p>Example code is located in the examples directory. The examples are compiled automatically as part of the build process. Simply call any of the examples with no arguments to see the help output. If your system has its IOMMU enabled you can run the examples as your regular user. If it doesn't, you'll need to run as a privileged user (root).</p>
<p>A good example to start with is <code>examples/nvme/identify</code>, which prints out information about all of the NVMe devices on your system.</p>
<p>Larger, more fully functional applications are available in the <code>app</code> directory. This includes the iSCSI and NVMe-oF target. </p>
</div></div><!-- contents -->
</div>
