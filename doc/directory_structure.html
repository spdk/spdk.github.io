<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- For Mobile Devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8">
  <meta name="generator" content="Doxygen 1.8.13">
  <title>SPDK: SPDK Directory Structure</title>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,900" type="text/css">
  <link href="../css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="tabs.css" type="text/css">
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div class="container-fluid">
  <div id="top">  <!-- do not remove this div, it is closed by doxygen! -->
    <div class="row no-gutters">
      <div class="col-sm-12">
        <section id="nav">
          <div class="navbar navbar-default navbar-static-top banner-tabs">
            <ul class="nav navbar-nav">
              <li role="presentation">
                <a href="http://www.spdk.io/">
                  <i class="glyphicon glyphicon-home"></i>
                  <span class="box-name">home</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/releases/">
                  <i class="glyphicon glyphicon-download-alt"></i>
                  <span class="box-name">download</span>
                </a>
              </li>
              <li class="active" role="presentation">
                <a href="index.html">
                  <i class="glyphicon glyphicon-book"></i>
                  <span class="box-name">documentation</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/development/">
                  <i class="glyphicon glyphicon-wrench"></i>
                  <span class="box-name">development</span>
                </a>
              </li>
              <li role="presentation">
                <a href="https://ci.spdk.io/status/">
                  <i class="glyphicon glyphicon-ok"></i>
                  <span class="box-name">CI status</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/community/">
                  <i class="glyphicon glyphicon-envelope"></i>
                  <span class="box-name">community</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/blog/">
                  <i class="glyphicon glyphicon-comment"></i>
                  <span class="box-name">Blog</span>
                </a>
              </li>
              <li role="presentation">
                <a href="https://github.com/spdk/spdk/wiki/Roadmap">
                  <i class="glyphicon glyphicon-map-marker"></i>
                  <span class="box-name">Roadmap</span>
                </a>
              </li>
              <li role="presentation">
                <a href="https://github.com/spdk/spdk/wiki/News">
                  <i class="glyphicon glyphicon-bullhorn"></i>
                  <span class="box-name">News</span>
                </a>
              </li>
            </ul>
          </div>
        </section>
      </div>
    </div>
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SPDK Directory Structure </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="dir_overview"></a>
Overview</h1>
<p>SPDK is primarily a collection of C libraries intended to be consumed directly by applications, but the repository also contains many examples and full-fledged applications. This will provide a general overview of what is where in the repository.</p>
<h2><a class="anchor" id="dir_app"></a>
Applications</h2>
<p>The <code>app</code> top-level directory contains four applications:</p><ul>
<li><code>app/iscsi_tgt</code>: An iSCSI target</li>
<li><code>app/nvmf_tgt</code>: An NVMe-oF target</li>
<li><code>app/iscsi_top</code>: Informational tool (like <code>top</code>) that tracks activity in the iSCSI target.</li>
<li><code>app/trace</code>: A tool for processing trace points output from the iSCSI and NVMe-oF targets.</li>
<li><code>app/vhost</code>: A vhost application that presents virtio controllers to QEMU-based VMs and process I/O submitted to those controllers.</li>
</ul>
<p>The application binaries will be in their respective directories after compiling and all can be run with no arguments to print out their command line arguments. For the iSCSI and NVMe-oF targets, they both need a configuration file (-c option). Fully commented examples of the configuration files live in the <code>etc/spdk</code> directory.</p>
<h2><a class="anchor" id="dir_build"></a>
Build Collateral</h2>
<p>The <code>build</code> directory contains all of the static libraries constructed during the build process. The <code>lib</code> directory combined with the <code>include/spdk</code> directory are the official outputs of an SPDK release, if it were to be packaged.</p>
<h2><a class="anchor" id="dir_doc"></a>
Documentation</h2>
<p>The <code>doc</code> top-level directory contains all of SPDK's documentation. API Documentation is created using Doxygen directly from the code, but more general articles and longer explanations reside in this directory, as well as the Doxygen config file.</p>
<p>To build the documentation, just type <code>make</code> within the doc directory.</p>
<h2><a class="anchor" id="dir_examples"></a>
Examples</h2>
<p>The <code>examples</code> top-level directory contains a set of examples intended to be used for reference. These are different than the applications, which are doing a "real" task that could reasonably be deployed. The examples are instead either heavily contrived to demonstrate some facet of SPDK, or aren't considered complete enough to warrant tagging them as a full blown SPDK application.</p>
<p>This is a great place to learn about how SPDK works. In particular, check out <code>examples/nvme/hello_world</code>.</p>
<h2><a class="anchor" id="dir_include"></a>
Include</h2>
<p>The <code>include</code> directory is where all of the header files are located. The public API is all placed in the <code>spdk</code> subdirectory of <code>include</code> and we highly recommend that applications set their include path to the top level <code>include</code> directory and include the headers by prefixing <code>spdk/</code> like this:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="nvme_8h.html">spdk/nvme.h</a>&quot;</span></div></div><!-- fragment --><p>Most of the headers here correspond with a library in the <code>lib</code> directory and will be covered in that section. There are a few headers that stand alone, however. They are:</p>
<ul>
<li><code><a class="el" href="assert_8h.html" title="Runtime and compile-time assert macros. ">assert.h</a></code></li>
<li><code><a class="el" href="barrier_8h.html" title="Memory barriers. ">barrier.h</a></code></li>
<li><code><a class="el" href="endian_8h.html" title="Endian conversion functions. ">endian.h</a></code></li>
<li><code><a class="el" href="fd_8h.html" title="OS filesystem utility functions. ">fd.h</a></code></li>
<li><code><a class="el" href="mmio_8h.html" title="Memory-mapped I/O utility functions. ">mmio.h</a></code></li>
<li><code>queue.h</code> and <code>queue_extras.h</code></li>
<li><code><a class="el" href="string_8h.html" title="String utility functions. ">string.h</a></code></li>
</ul>
<p>There is also an <code>spdk_internal</code> directory that contains header files widely included by libraries within SPDK, but that are not part of the public API and would not be installed on a user's system.</p>
<h2><a class="anchor" id="dir_lib"></a>
Libraries</h2>
<p>The <code>lib</code> directory contains the real heart of SPDK. Each component is a C library with its own directory under <code>lib</code>.</p>
<h3><a class="anchor" id="dir_bdev"></a>
Block Device Abstraction Layer</h3>
<p>The <code>bdev</code> directory contains a block device abstraction layer that is currently used within the iSCSI and NVMe-oF targets. The public interface is <code><a class="el" href="bdev_8h.html" title="Block device abstraction layer. ">include/spdk/bdev.h</a></code>. This library lacks clearly defined responsibilities as of this writing and instead does a number of things:</p><ul>
<li>Translates from a common <code>block</code> protocol to specific protocols like NVMe or to system calls like libaio. There are currently three block device backend modules that can be plugged in - libaio, SPDK NVMe, CephRBD, and a RAM-based backend called malloc.</li>
<li>Provides a mechanism for composing virtual block devices from physical devices (to do RAID and the like).</li>
<li>Handles some memory allocation for data buffers.</li>
</ul>
<p>This layer also could be made to do I/O queueing or splitting in a general way. We're open to design ideas and discussion here.</p>
<h3><a class="anchor" id="dir_conf"></a>
Configuration File Parser</h3>
<p>The <code>conf</code> directory contains configuration file parser. The public header is <code><a class="el" href="conf_8h.html" title="Configuration file parser. ">include/spdk/conf.h</a></code>. The configuration file format is kind of like INI, except that the directives are are "Name Value" instead of "Name = Value". This is the configuration format for both the iSCSI and NVMe-oF targets.</p>
<p>... Lots more libraries that need to be described ...</p>
<h2><a class="anchor" id="dir_mk"></a>
Makefile Fragments</h2>
<p>The <code>mk</code> directory contains a number of shared Makefile fragments used in the build system.</p>
<h2><a class="anchor" id="dir_scripts"></a>
Scripts</h2>
<p>The <code>scripts</code> directory contains convenient scripts for a number of operations. The two most important are <code>check_format.sh</code>, which will use astyle and pep8 to check C, C++, and Python coding style against our defined conventions, and <code>setup.sh</code> which binds and unbinds devices from kernel drivers.</p>
<h2><a class="anchor" id="dir_tests"></a>
Tests</h2>
<p>The <code>test</code> directory contains all of the tests for SPDK's components and the subdirectories mirror the structure of the entire repository. The tests are a mixture of unit tests and functional tests. </p>
</div></div><!-- contents -->
</div>
