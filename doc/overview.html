<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="generator" content="Doxygen 1.9.1" />
  <title>SPDK: SPDK Structural Overview</title>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../js/doxyboot.js"></script>
  <script type="text/javascript" src="./navtree.js"></script>
  <link href="../css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="../css/spdk.css" rel="stylesheet" type="text/css">
</head>
<body>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark px-2">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="/" aria-label="SPDK">
      <img src="/img/spdk.svg"  width="36" height="36" alt="Storage Performance Development Kit" />
    </a>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <div class="navbar-nav mr-auto">
        <a class="nav-link header-link active" href="../doc/">Documentation</a>
        <a class="nav-link header-link" href="../development/">Development</a>
        <a class="nav-link header-link" href="../community/">Community</a>
        <a class="nav-link header-link" href="../blog/">Blog</a>
      </div>
      <div class="navbar-nav ml-auto mr-3">
        <a class="nav-link header-link" href="https://github.com/spdk/spdk">
          <svg xmlns="http://www.w3.org/2000/svg" class="navbar-nav-svg"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
        </a>
      </div>
    </div>
  </nav>
  <div class="container-fluid doc">
      <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('overview.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">SPDK Structural Overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_overview"></a> </p>
<h1><a class="anchor" id="dir_overview"></a>
Overview</h1>
<p>SPDK is composed of a set of C libraries residing in <code>lib</code> with public interface header files in <code>include/spdk</code>, plus a set of applications built out of those libraries in <code>app</code>. Users can use the C libraries in their software or deploy the full SPDK applications.</p>
<p>SPDK is designed around message passing instead of locking, and most of the SPDK libraries make several assumptions about the underlying threading model of the application they are embedded into. However, SPDK goes to great lengths to remain agnostic to the specific message passing, event, co-routine, or light-weight threading framework actually in use. To accomplish this, all SPDK libraries interact with an abstraction library in <code>lib/thread</code> (public interface at <code><a class="el" href="thread_8h.html" title="Thread.">include/spdk/thread.h</a></code>). Any framework can initialize the threading abstraction and provide callbacks to implement the functionality that the SPDK libraries need. For more information on this abstraction, see <a class="el" href="concurrency.html">Message Passing and Concurrency</a>.</p>
<p>SPDK is built on top of POSIX for most operations. To make porting to non-POSIX environments easier, all POSIX headers are isolated into <code><a class="el" href="stdinc_8h.html" title="Standard C headers.">include/spdk/stdinc.h</a></code>. However, SPDK requires a number of operations that POSIX does not provide, such as enumerating the PCI devices on the system or allocating memory that is safe for DMA. These additional operations are all abstracted in a library called <code>env</code> whose public header is at <code><a class="el" href="env_8h.html" title="Encapsulated third-party dependencies.">include/spdk/env.h</a></code>. By default, SPDK implements the <code>env</code> interface using a library based on DPDK. However, that implementation can be swapped out. See <a class="el" href="porting.html">SPDK Porting Guide</a> for additional information.</p>
<h1><a class="anchor" id="dir_app"></a>
Applications</h1>
<p>The <code>app</code> top-level directory contains full-fledged applications, built out of the SPDK components. For a full overview, see <a class="el" href="app_overview.html">An Overview of SPDK Applications</a>.</p>
<p>SPDK applications can typically be started with a small number of configuration options. Full configuration of the applications is then performed using JSON-RPC. See <a class="el" href="jsonrpc.html">JSON-RPC</a> for additional information.</p>
<h1><a class="anchor" id="dir_lib"></a>
Libraries</h1>
<p>The <code>lib</code> directory contains the real heart of SPDK. Each component is a C library with its own directory under <code>lib</code>. Some of the key libraries are:</p>
<ul>
<li><a class="el" href="bdev.html">Block Device User Guide</a></li>
<li><a class="el" href="nvme.html">NVMe Driver</a></li>
</ul>
<h1><a class="anchor" id="dir_doc"></a>
Documentation</h1>
<p>The <code>doc</code> top-level directory contains all of SPDK's documentation. API Documentation is created using Doxygen directly from the code, but more general articles and longer explanations reside in this directory, as well as the Doxygen config file.</p>
<p>To build the documentation, just type <code>make</code> within the doc directory.</p>
<h1><a class="anchor" id="dir_examples"></a>
Examples</h1>
<p>The <code>examples</code> top-level directory contains a set of examples intended to be used for reference. These are different than the applications, which are doing a "real" task that could reasonably be deployed. The examples are instead either heavily contrived to demonstrate some facet of SPDK, or aren't considered complete enough to warrant tagging them as a full blown SPDK application.</p>
<p>This is a great place to learn about how SPDK works. In particular, check out <code>examples/nvme/hello_world</code>.</p>
<h1><a class="anchor" id="dir_include"></a>
Include</h1>
<p>The <code>include</code> directory is where all of the header files are located. The public API is all placed in the <code>spdk</code> subdirectory of <code>include</code> and we highly recommend that applications set their include path to the top level <code>include</code> directory and include the headers by prefixing <code>spdk/</code> like this:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="nvme_8h.html">spdk/nvme.h</a>&quot;</span></div>
<div class="ttc" id="anvme_8h_html"><div class="ttname"><a href="nvme_8h.html">nvme.h</a></div><div class="ttdoc">NVMe driver public API.</div></div>
</div><!-- fragment --><p>Most of the headers here correspond with a library in the <code>lib</code> directory. There are a few headers that stand alone, however. They are:</p>
<ul>
<li><code><a class="el" href="assert_8h.html" title="Runtime and compile-time assert macros.">assert.h</a></code></li>
<li><code><a class="el" href="barrier_8h.html" title="Memory barriers.">barrier.h</a></code></li>
<li><code><a class="el" href="endian_8h.html" title="Endian conversion functions.">endian.h</a></code></li>
<li><code><a class="el" href="fd_8h.html" title="OS filesystem utility functions.">fd.h</a></code></li>
<li><code><a class="el" href="mmio_8h.html" title="Memory-mapped I/O utility functions.">mmio.h</a></code></li>
<li><code>queue.h</code> and <code>queue_extras.h</code></li>
<li><code><a class="el" href="string_8h.html" title="String utility functions.">string.h</a></code></li>
</ul>
<p>There is also an <code>spdk_internal</code> directory that contains header files widely included by libraries within SPDK, but that are not part of the public API and would not be installed on a user's system.</p>
<h1><a class="anchor" id="dir_scripts"></a>
Scripts</h1>
<p>The <code>scripts</code> directory contains convenient scripts for a number of operations. The two most important are <code>check_format.sh</code>, which will use astyle and pep8 to check C, C++, and Python coding style against our defined conventions, and <code>setup.sh</code> which binds and unbinds devices from kernel drivers.</p>
<h1><a class="anchor" id="dir_tests"></a>
Tests</h1>
<p>The <code>test</code> directory contains all of the tests for SPDK's components and the subdirectories mirror the structure of the entire repository. The tests are a mixture of unit tests and functional tests. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<ul>
        <li class="footer">Generated by
        <a href="http://www.doxygen.org/index.html">doxygen</a> 1.9.1 </li>
</ul>
</div>
</div>
</body>
</html>
