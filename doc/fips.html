<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="generator" content="Doxygen 1.10.0" />
  <title>SPDK: FIPS Compliance</title>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../js/doxyboot.js"></script>
  <script type="text/javascript" src="./navtree.js"></script>
  <link href="../css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="../css/spdk.css" rel="stylesheet" type="text/css">
</head>
<body>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark px-2">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="/" aria-label="SPDK">
      <img src="/img/spdk.svg"  width="36" height="36" alt="Storage Performance Development Kit" />
    </a>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <div class="navbar-nav me-auto">
        <a class="nav-link header-link active" href="../doc/">Documentation</a>
        <a class="nav-link header-link" href="../development/">Development</a>
        <a class="nav-link header-link" href="../community/">Community</a>
        <a class="nav-link header-link" href="../blog/">Blog</a>
      </div>
      <div class="navbar-nav ms-auto me-3">
        <a class="nav-link header-link" href="https://github.com/spdk/spdk">
          <svg xmlns="http://www.w3.org/2000/svg" class="navbar-nav-svg"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
        </a>
      </div>
    </div>
  </nav>
  <div class="container-fluid doc">
      <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('fips.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">FIPS Compliance</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_fips"></a> SPDK does not implement any cryptography itself, and for use cases requiring cryptographic functions it relies on external components. Therefore, SPDK alone has not acquired any FIPS (Federal Information Processing Standards) certification, but a reasonable effort has been made to check, if SPDK can be a part of a FIPS certified system as one of the components. Any FIPS certification of such a system, however, is a responsibility of the system integrator or builder. The dependencies are:</p>
<ul>
<li><a href="https://github.com/intel/isa-l_crypto">Intel(R) Intelligent Storage Acceleration Library Crypto Version (isa-l-crypto)</a>,</li>
<li><a href="https://github.com/intel/intel-ipsec-mb">Intel(R) Multi-Buffer Crypto for IPSec (intel-ipsec-mb)</a>,</li>
<li><a href="https://doc.dpdk.org/guides/cryptodevs/qat.html">Intel QuickAssist Technology (QAT) Crypto Driver</a>,</li>
<li><a href="https://doc.dpdk.org/guides/cryptodevs/mlx5.html">NVIDIA MLX5 Crypto Driver</a>,</li>
<li><a href="https://www.openssl.org/">OpenSSL</a>.</li>
</ul>
<p>Intel QAT driver, NVIDIA MLX5 driver and intel-ipsec-mb are delivered by DPDK as <a href="https://doc.dpdk.org/guides/cryptodevs/">Crypto Device Drivers</a>. MLX5 usage is supported for both DPDK and SPDK.</p>
<p>SPDK can be compatible with FIPS, if all enabled dependencies are operating in a FIPS approved state.</p>
<h1>DPDK</h1>
<p>To ensure the system using SPDK can apply for FIPS certification, please use FIPS certified versions of DPDK and intel-ipsec-mb - you may include a custom DPDK version via <code>--with-dpdk</code> configuration flag. Please also make sure, that FIPS-certified hardware and firmware is used (e.g. Intel QAT).</p>
<h1>isa-l-crypto</h1>
<p>The isa-l-crypto library has not yet acquired the FIPS certification. In order for SPDK to be included in a FIPS certified system, please do not use the software Acceleration Framework module for encryption/decryption.</p>
<h1>OpenSSL</h1>
<p>SPDK uses various functions from OpenSSL library to perform tasks like key derivation in <a href="https://github.com/spdk/spdk/blob/master/include/spdk_internal/nvme_tcp.h">NVMe TCP</a> and TLS handshake in <a href="https://github.com/spdk/spdk/blob/master/module/sock/posix/posix.c">socket module</a>. OpenSSL delivers code implemenations via <a href="https://www.openssl.org/docs/man3.0/man7/provider.html">providers</a>.</p>
<p>One of such providers delivers Federal Information Processing Standards (FIPS) compliant functions, called <a href="https://www.openssl.org/docs/man3.0/man7/OSSL_PROVIDER-FIPS.html">FIPS provider</a>, and if <a href="https://wiki.openssl.org/index.php/OpenSSL_3.0#Using_the_FIPS_module_in_SSL.2FTLS">set up correctly</a>, will include only function implementations that fall under FIPS 140-2.</p>
<p>SPDK provides a test in <code>test/nvmf/fips/fips.sh</code> that includes OpenSSL configuration via <a href="https://www.openssl.org/docs/man1.1.1/man5/config.html">OPENSSL_CONF</a>. As seen in that test, the configuration will differ between some operating systems (see <a href="https://www.redhat.com/en/blog/openssl-fips-140-2-upstream-140-3-downstream">Fedora38</a> for example). Correctly configuring OpenSSL FIPS is user responsibility (see <a href="https://github.com/openssl/openssl/blob/master/README-FIPS.md">this link</a> for reference on how to enable FIPS provider). OpenSSL documentation states that "It is undefined
which implementation of an algorithm will be used if multiple implementations are available", so we strongly recommend to use FIPS + base provider combination exclusively to ensure FIPS compliance (<a href="https://www.openssl.org/docs/man3.0/man7/fips_module.html#Programmatically-loading-the-FIPS-module-default-library-context">OpenSSL doc</a>).</p>
<p>To ensure the system using SPDK can apply for FIPS certification, please use OpenSSL versions 3.0.0+ only. In terms of generation and handling of the pre-shared keys for TLS, it is recommended to ensure compliance with FIPS standards â€“ in particular: NIST Special Publication 800-133, Revision 2.</p>
<h1>Example crypto configuration</h1>
<p>Below are RPCs that can be sent to SPDK application to configure FIPS compliant cryptography. See <code>test/bdev/blockdev.sh</code> for example usage and <a class="el" href="jsonrpc.html">JSON-RPC</a> for explanations of RPC commands.</p>
<p>Configuration of dpdk_cryptodev in acceleration framework should first initialize the module, then select cryptodev device (crypto_aesni_mb, crypto_qat or mlx5_pci) and finally assign the dpdk_cryptodev driver to specific operations:</p>
<div class="fragment"><div class="line">./scripts/rpc.py dpdk_cryptodev_scan_accel_module</div>
<div class="line">./scripts/rpc.py dpdk_cryptodev_set_driver -d crypto_aesni_mb</div>
<div class="line">./scripts/rpc.py accel_assign_opc -o encrypt -m dpdk_cryptodev</div>
<div class="line">./scripts/rpc.py accel_assign_opc -o decrypt -m dpdk_cryptodev</div>
</div><!-- fragment --><p>MLX5 configuration, which depends on 3rd party FIPS-certified hardware, should contain only module initialization ad operation assignment:</p>
<div class="fragment"><div class="line">./scripts/rpc.py mlx5_scan_accel_module</div>
<div class="line">./scripts/rpc.py accel_assign_opc -o encrypt -m mlx5</div>
<div class="line">./scripts/rpc.py accel_assign_opc -o decrypt -m mlx5</div>
</div><!-- fragment --><h1>Symmetric encryption keys</h1>
<p>It is recommended to use the 256 bit keys with symmetric encryption algorithms. For AES-XTS specifically, the supplied Key1 must be different from Key2. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<ul>
        <li class="footer">Generated by
        <a href="http://www.doxygen.org/index.html">doxygen</a> 1.10.0 </li>
</ul>
</div>
</div>
</body>
</html>
