<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="generator" content="Doxygen 1.10.0" />
  <title>SPDK: spdk_bdev_fn_table Struct Reference</title>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script type="text/javascript" src="../js/doxyboot.js"></script>
  <script type="text/javascript" src="./navtree.js"></script>
  <link href="../css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="../css/spdk.css" rel="stylesheet" type="text/css">
</head>
<body>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark px-2">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="/" aria-label="SPDK">
      <img src="/img/spdk.svg"  width="36" height="36" alt="Storage Performance Development Kit" />
    </a>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <div class="navbar-nav me-auto">
        <a class="nav-link header-link active" href="../doc/">Documentation</a>
        <a class="nav-link header-link" href="../development/">Development</a>
        <a class="nav-link header-link" href="../community/">Community</a>
        <a class="nav-link header-link" href="../blog/">Blog</a>
      </div>
      <div class="navbar-nav ms-auto me-3">
        <a class="nav-link header-link" href="https://github.com/spdk/spdk">
          <svg xmlns="http://www.w3.org/2000/svg" class="navbar-nav-svg"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
        </a>
      </div>
    </div>
  </nav>
  <div class="container-fluid doc">
      <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('structspdk__bdev__fn__table.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle"><div class="title">spdk_bdev_fn_table Struct Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Function table for a block device backend.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;bdev_module.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a8a76c50a2b20205ec9fffe4afb9e3a15" id="r_a8a76c50a2b20205ec9fffe4afb9e3a15"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8a76c50a2b20205ec9fffe4afb9e3a15">destruct</a> )(void *ctx)</td></tr>
<tr class="memdesc:a8a76c50a2b20205ec9fffe4afb9e3a15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the backend block device object.  <br /></td></tr>
<tr class="separator:a8a76c50a2b20205ec9fffe4afb9e3a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae80a9002371becdc6fb1c13f8f5173bf" id="r_ae80a9002371becdc6fb1c13f8f5173bf"><td class="memItemLeft" align="right" valign="top"><a id="ae80a9002371becdc6fb1c13f8f5173bf" name="ae80a9002371becdc6fb1c13f8f5173bf"></a>
void(*&#160;</td><td class="memItemRight" valign="bottom"><b>submit_request</b> )(struct spdk_io_channel *ch, struct <a class="el" href="structspdk__bdev__io.html">spdk_bdev_io</a> *)</td></tr>
<tr class="memdesc:ae80a9002371becdc6fb1c13f8f5173bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the IO. <br /></td></tr>
<tr class="separator:ae80a9002371becdc6fb1c13f8f5173bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20ec74cad9e56c5ac8ee9db239d8f46e" id="r_a20ec74cad9e56c5ac8ee9db239d8f46e"><td class="memItemLeft" align="right" valign="top"><a id="a20ec74cad9e56c5ac8ee9db239d8f46e" name="a20ec74cad9e56c5ac8ee9db239d8f46e"></a>
bool(*&#160;</td><td class="memItemRight" valign="bottom"><b>io_type_supported</b> )(void *ctx, enum <a class="el" href="bdev_8h.html#a633029e24ab5ae4a689bffa2565a519f">spdk_bdev_io_type</a>)</td></tr>
<tr class="memdesc:a20ec74cad9e56c5ac8ee9db239d8f46e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the block device supports a specific I/O type. <br /></td></tr>
<tr class="separator:a20ec74cad9e56c5ac8ee9db239d8f46e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4b0bd7f2a363d71050999a36c4cee92" id="r_aa4b0bd7f2a363d71050999a36c4cee92"><td class="memItemLeft" align="right" valign="top"><a id="aa4b0bd7f2a363d71050999a36c4cee92" name="aa4b0bd7f2a363d71050999a36c4cee92"></a>
struct spdk_io_channel *(*&#160;</td><td class="memItemRight" valign="bottom"><b>get_io_channel</b> )(void *ctx)</td></tr>
<tr class="memdesc:aa4b0bd7f2a363d71050999a36c4cee92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an I/O channel for the specific bdev for the calling thread. <br /></td></tr>
<tr class="separator:aa4b0bd7f2a363d71050999a36c4cee92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a417860f5598560a20b7bd4b5e8b4c3b0" id="r_a417860f5598560a20b7bd4b5e8b4c3b0"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a417860f5598560a20b7bd4b5e8b4c3b0">dump_info_json</a> )(void *ctx, struct spdk_json_write_ctx *w)</td></tr>
<tr class="memdesc:a417860f5598560a20b7bd4b5e8b4c3b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output driver-specific information to a JSON stream.  <br /></td></tr>
<tr class="separator:a417860f5598560a20b7bd4b5e8b4c3b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a233c08c7269afc1108c3f734cc545ff4" id="r_a233c08c7269afc1108c3f734cc545ff4"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a233c08c7269afc1108c3f734cc545ff4">write_config_json</a> )(struct <a class="el" href="structspdk__bdev.html">spdk_bdev</a> *bdev, struct spdk_json_write_ctx *w)</td></tr>
<tr class="memdesc:a233c08c7269afc1108c3f734cc545ff4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output bdev-specific RPC configuration to a JSON stream.  <br /></td></tr>
<tr class="separator:a233c08c7269afc1108c3f734cc545ff4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafc336b4a42290b7e944fa0e73558a62" id="r_aafc336b4a42290b7e944fa0e73558a62"><td class="memItemLeft" align="right" valign="top">uint64_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aafc336b4a42290b7e944fa0e73558a62">get_spin_time</a> )(struct spdk_io_channel *ch)</td></tr>
<tr class="memdesc:aafc336b4a42290b7e944fa0e73558a62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get spin-time per I/O channel in microseconds.  <br /></td></tr>
<tr class="separator:aafc336b4a42290b7e944fa0e73558a62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb33ace4c653ed07120eb1275d698962" id="r_acb33ace4c653ed07120eb1275d698962"><td class="memItemLeft" align="right" valign="top"><a id="acb33ace4c653ed07120eb1275d698962" name="acb33ace4c653ed07120eb1275d698962"></a>
void *(*&#160;</td><td class="memItemRight" valign="bottom"><b>get_module_ctx</b> )(void *ctx)</td></tr>
<tr class="memdesc:acb33ace4c653ed07120eb1275d698962"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get bdev module context. <br /></td></tr>
<tr class="separator:acb33ace4c653ed07120eb1275d698962"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af73c1ef741a4751a64354eeb0532396c" id="r_af73c1ef741a4751a64354eeb0532396c"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af73c1ef741a4751a64354eeb0532396c">get_memory_domains</a> )(void *ctx, struct spdk_memory_domain **domains, int array_size)</td></tr>
<tr class="memdesc:af73c1ef741a4751a64354eeb0532396c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get memory domains used by bdev.  <br /></td></tr>
<tr class="separator:af73c1ef741a4751a64354eeb0532396c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed2c3f1df868458ed707508e950c7701" id="r_aed2c3f1df868458ed707508e950c7701"><td class="memItemLeft" align="right" valign="top"><a id="aed2c3f1df868458ed707508e950c7701" name="aed2c3f1df868458ed707508e950c7701"></a>
void(*&#160;</td><td class="memItemRight" valign="bottom"><b>reset_device_stat</b> )(void *ctx)</td></tr>
<tr class="memdesc:aed2c3f1df868458ed707508e950c7701"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset I/O statistics specific for this bdev context. <br /></td></tr>
<tr class="separator:aed2c3f1df868458ed707508e950c7701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9c6d1b0e881b2715a9dba41a9776bb4" id="r_af9c6d1b0e881b2715a9dba41a9776bb4"><td class="memItemLeft" align="right" valign="top"><a id="af9c6d1b0e881b2715a9dba41a9776bb4" name="af9c6d1b0e881b2715a9dba41a9776bb4"></a>
void(*&#160;</td><td class="memItemRight" valign="bottom"><b>dump_device_stat_json</b> )(void *ctx, struct spdk_json_write_ctx *w)</td></tr>
<tr class="memdesc:af9c6d1b0e881b2715a9dba41a9776bb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump I/O statistics specific for this bdev context. <br /></td></tr>
<tr class="separator:af9c6d1b0e881b2715a9dba41a9776bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bf6b6bd1f4c91a1b462182a23a79f2a" id="r_a5bf6b6bd1f4c91a1b462182a23a79f2a"><td class="memItemLeft" align="right" valign="top"><a id="a5bf6b6bd1f4c91a1b462182a23a79f2a" name="a5bf6b6bd1f4c91a1b462182a23a79f2a"></a>
bool(*&#160;</td><td class="memItemRight" valign="bottom"><b>accel_sequence_supported</b> )(void *ctx, enum <a class="el" href="bdev_8h.html#a633029e24ab5ae4a689bffa2565a519f">spdk_bdev_io_type</a> type)</td></tr>
<tr class="memdesc:a5bf6b6bd1f4c91a1b462182a23a79f2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if bdev can handle spdk_accel_sequence to handle I/O of specific type. <br /></td></tr>
<tr class="separator:a5bf6b6bd1f4c91a1b462182a23a79f2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Function table for a block device backend. </p>
<p>The backend block device function table provides a set of APIs to allow communication with a backend. The main commands are read/write API calls for I/O via submit_request. </p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="a8a76c50a2b20205ec9fffe4afb9e3a15" name="a8a76c50a2b20205ec9fffe4afb9e3a15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a76c50a2b20205ec9fffe4afb9e3a15">&#9670;&#160;</a></span>destruct</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* spdk_bdev_fn_table::destruct) (void *ctx)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy the backend block device object. </p>
<p>If the destruct process for the bdev is asynchronous, return 1 from this function, and then call <a class="el" href="bdev__module_8h.html#a8d51d8e113f0dffb1bbe535ea01c495f" title="Notify the bdev layer that an asynchronous destruct operation is complete.">spdk_bdev_destruct_done()</a> once the async work is complete. If the destruct process is synchronous, return 0 if successful, or &lt;0 if unsuccessful. </p>

</div>
</div>
<a id="a417860f5598560a20b7bd4b5e8b4c3b0" name="a417860f5598560a20b7bd4b5e8b4c3b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a417860f5598560a20b7bd4b5e8b4c3b0">&#9670;&#160;</a></span>dump_info_json</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* spdk_bdev_fn_table::dump_info_json) (void *ctx, struct spdk_json_write_ctx *w)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Output driver-specific information to a JSON stream. </p>
<p>Optional - may be NULL.</p>
<p>The JSON write context will be initialized with an open object, so the bdev driver should write a name (based on the driver name) followed by a JSON value (most likely another nested object). </p>

</div>
</div>
<a id="af73c1ef741a4751a64354eeb0532396c" name="af73c1ef741a4751a64354eeb0532396c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af73c1ef741a4751a64354eeb0532396c">&#9670;&#160;</a></span>get_memory_domains</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* spdk_bdev_fn_table::get_memory_domains) (void *ctx, struct spdk_memory_domain **domains, int array_size)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get memory domains used by bdev. </p>
<p>Optional - may be NULL. Vbdev module implementation should call <a class="el" href="bdev_8h.html#a2643db603c5c9762d839036c1658bf1b">spdk_bdev_get_memory_domains</a> for underlying bdev. Vbdev module must inspect types of memory domains returned by base bdev and report only those memory domains that it can work with. </p>

</div>
</div>
<a id="aafc336b4a42290b7e944fa0e73558a62" name="aafc336b4a42290b7e944fa0e73558a62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafc336b4a42290b7e944fa0e73558a62">&#9670;&#160;</a></span>get_spin_time</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t(* spdk_bdev_fn_table::get_spin_time) (struct spdk_io_channel *ch)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get spin-time per I/O channel in microseconds. </p>
<p>Optional - may be NULL. </p>

</div>
</div>
<a id="a233c08c7269afc1108c3f734cc545ff4" name="a233c08c7269afc1108c3f734cc545ff4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a233c08c7269afc1108c3f734cc545ff4">&#9670;&#160;</a></span>write_config_json</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* spdk_bdev_fn_table::write_config_json) (struct <a class="el" href="structspdk__bdev.html">spdk_bdev</a> *bdev, struct spdk_json_write_ctx *w)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Output bdev-specific RPC configuration to a JSON stream. </p>
<p>Optional - may be NULL.</p>
<p>This function should only be implemented for bdevs which can be configured independently of other bdevs. For example, RPCs to create a bdev for an NVMe namespace may not be generated by this function, since enumerating an NVMe namespace requires attaching to an NVMe controller, and that controller may contain multiple namespaces. The <a class="el" href="structspdk__bdev__module.html" title="Block device module.">spdk_bdev_module</a>'s config_json function should be used instead for these cases.</p>
<p>The JSON write context will be initialized with an open object, so the bdev driver should write all data necessary to recreate this bdev by invoking constructor method. No other data should be written. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="bdev__module_8h.html">bdev_module.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<ul>
        <li class="footer">Generated by
        <a href="http://www.doxygen.org/index.html">doxygen</a> 1.10.0 </li>
</ul>
</div>
</div>
</body>
</html>
