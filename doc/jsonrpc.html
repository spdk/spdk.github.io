<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- For Mobile Devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8">
  <meta name="generator" content="Doxygen 1.8.11">
  <title>SPDK: JSON-RPC Methods</title>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,900" type="text/css">
  <link href="../css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="tabs.css" type="text/css">
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div class="container-fluid">
  <div id="top">  <!-- do not remove this div, it is closed by doxygen! -->
    <div class="row no-gutters">
      <div class="col-sm-12">
        <section id="nav">
          <div class="navbar navbar-default navbar-static-top banner-tabs">
            <ul class="nav navbar-nav">
              <li role="presentation">
                <a href="http://www.spdk.io/">
                  <i class="glyphicon glyphicon-home"></i>
                  <span class="box-name">home</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/releases/">
                  <i class="glyphicon glyphicon-download-alt"></i>
                  <span class="box-name">download</span>
                </a>
              </li>
              <li class="active" role="presentation">
                <a href="index.html">
                  <i class="glyphicon glyphicon-book"></i>
                  <span class="box-name">documentation</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/development/">
                  <i class="glyphicon glyphicon-wrench"></i>
                  <span class="box-name">development</span>
                </a>
              </li>
              <li role="presentation">
                <a href="https://ci.spdk.io/">
                  <i class="glyphicon glyphicon-ok"></i>
                  <span class="box-name">CI status</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/community/">
                  <i class="glyphicon glyphicon-envelope"></i>
                  <span class="box-name">community</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/blog/">
                  <i class="glyphicon glyphicon-comment"></i>
                  <span class="box-name">Blog</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/roadmap/">
                  <i class="glyphicon glyphicon-map-marker"></i>
                  <span class="box-name">Roadmap</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/news/">
                  <i class="glyphicon glyphicon-bullhorn"></i>
                  <span class="box-name">News</span>
                </a>
              </li>
            </ul>
          </div>
        </section>
      </div>
    </div>
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('jsonrpc.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">JSON-RPC Methods </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="jsonrpc_overview"></a>
Overview</h1>
<p>SPDK implements a <a href="http://www.jsonrpc.org/specification">JSON-RPC 2.0</a> server to allow external management tools to dynamically configure SPDK components.</p>
<h1><a class="anchor" id="jsonrpc_components_nvmf_tgt"></a>
NVMe-oF Target</h1>
<h2><a class="anchor" id="rpc_get_nvmf_subsystems"></a>
get_nvmf_subsystems method</h2>
<h3>Parameters</h3>
<p>This method has no parameters.</p>
<h3>Example</h3>
<p>Example request: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;  &quot;jsonrpc&quot;: &quot;2.0&quot;,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  &quot;id&quot;: 1,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  &quot;method&quot;: &quot;get_nvmf_subsystems&quot;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;}</div></div><!-- fragment --><p>Example response: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;  &quot;jsonrpc&quot;: &quot;2.0&quot;,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  &quot;id&quot;: 1,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  &quot;result&quot;: [</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    {</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;      &quot;core&quot;: 0,</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;      &quot;nqn&quot;: &quot;nqn.2014-08.org.nvmexpress.discovery&quot;,</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;      &quot;subtype&quot;: &quot;Discovery&quot;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;      &quot;listen_addresses&quot;: [],</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;      &quot;hosts&quot;: [],</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;      &quot;allow_any_host&quot;: true</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    },</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    {</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;      &quot;core&quot;: 5,</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;      &quot;nqn&quot;: &quot;nqn.2016-06.io.spdk:cnode1&quot;,</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;      &quot;subtype&quot;: &quot;NVMe&quot;,</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;      &quot;listen_addresses&quot;: [</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;        {</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;          &quot;trtype&quot;: &quot;RDMA&quot;,</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;          &quot;adrfam&quot;: &quot;IPv4&quot;,</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;          &quot;traddr&quot;: &quot;192.168.0.123&quot;,</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;          &quot;trsvcid&quot;: &quot;4420&quot;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        }</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;      ],</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;      &quot;hosts&quot;: [</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        {&quot;nqn&quot;: &quot;nqn.2016-06.io.spdk:host1&quot;}</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;      ],</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;      &quot;allow_any_host&quot;: false,</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;      &quot;serial_number&quot;: &quot;abcdef&quot;,</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;      &quot;namespaces&quot;: [</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        {&quot;nsid&quot;: 1, &quot;name&quot;: &quot;Malloc2&quot;},</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        {&quot;nsid&quot;: 2, &quot;name&quot;: &quot;Nvme0n1&quot;}</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;      ]</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    }</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  ]</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;}</div></div><!-- fragment --><h2><a class="anchor" id="rpc_construct_nvmf_subsystem"></a>
construct_nvmf_subsystem method</h2>
<p>Construct an NVMe over Fabrics target subsystem.</p>
<h3>Parameters</h3>
<table class="doxtable">
<tr>
<th>Name </th><th>Optional </th><th>Type </th><th>Description  </th></tr>
<tr>
<td>core </td><td>Optional </td><td>number </td><td>Core to run the subsystem's poller on. Default: Automatically assign a core. </td></tr>
<tr>
<td>nqn </td><td>Required </td><td>string </td><td>Subsystem NQN </td></tr>
<tr>
<td>listen_addresses </td><td>Required </td><td>array </td><td>Array of <a class="el" href="jsonrpc.html#rpc_construct_nvmf_subsystem_listen_address">listen_address</a> objects </td></tr>
<tr>
<td>hosts </td><td>Optional </td><td>array </td><td>Array of strings containing allowed host NQNs. Default: No hosts allowed. </td></tr>
<tr>
<td>allow_any_host </td><td>Optional </td><td>boolean </td><td>Allow any host (<code>true</code>) or enforce allowed host whitelist (<code>false</code>). Default: <code>false</code>. </td></tr>
<tr>
<td>serial_number </td><td>Required </td><td>string </td><td>Serial number of virtual controller </td></tr>
<tr>
<td>namespaces </td><td>Optional </td><td>array </td><td>Array of <a class="el" href="jsonrpc.html#rpc_construct_nvmf_subsystem_namespace">namespace</a> objects. Default: No namespaces. </td></tr>
</table>
<h3><a class="anchor" id="rpc_construct_nvmf_subsystem_listen_address"></a>
listen_address</h3>
<table class="doxtable">
<tr>
<th>Name </th><th>Optional </th><th>Type </th><th>Description  </th></tr>
<tr>
<td>trtype </td><td>Required </td><td>string </td><td>Transport type ("RDMA") </td></tr>
<tr>
<td>adrfam </td><td>Required </td><td>string </td><td>Address family ("IPv4", "IPv6", "IB", or "FC") </td></tr>
<tr>
<td>traddr </td><td>Required </td><td>string </td><td>Transport address </td></tr>
<tr>
<td>trsvcid </td><td>Required </td><td>string </td><td>Transport service ID </td></tr>
</table>
<h3><a class="anchor" id="rpc_construct_nvmf_subsystem_namespace"></a>
namespace</h3>
<table class="doxtable">
<tr>
<th>Name </th><th>Optional </th><th>Type </th><th>Description  </th></tr>
<tr>
<td>nsid </td><td>Optional </td><td>number </td><td>Namespace ID between 1 and 4294967294, inclusive. Default: Automatically assign NSID. </td></tr>
<tr>
<td>bdev_name </td><td>Required </td><td>string </td><td>Name of bdev to expose as a namespace. </td></tr>
</table>
<h3>Example</h3>
<p>Example request:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;  &quot;jsonrpc&quot;: &quot;2.0&quot;,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  &quot;id&quot;: 1,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  &quot;method&quot;: &quot;construct_nvmf_subsystem&quot;,</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  &quot;params&quot;: {</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    &quot;core&quot;: 5,</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    &quot;nqn&quot;: &quot;nqn.2016-06.io.spdk:cnode1&quot;,</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    &quot;listen_addresses&quot;: [</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;      {</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        &quot;trtype&quot;: &quot;RDMA&quot;,</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        &quot;adrfam&quot;: &quot;IPv4&quot;,</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        &quot;traddr&quot;: &quot;192.168.0.123&quot;,</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        &quot;trsvcid: &quot;4420&quot;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;      }</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    ],</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    &quot;hosts&quot;: [</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;      &quot;nqn.2016-06.io.spdk:host1&quot;,</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;      &quot;nqn.2016-06.io.spdk:host2&quot;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    ],</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    &quot;allow_any_host&quot;: false,</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    &quot;serial_number&quot;: &quot;abcdef&quot;,</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    &quot;namespaces&quot;: [</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;      {&quot;nsid&quot;: 1, &quot;name&quot;: &quot;Malloc2&quot;},</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;      {&quot;nsid&quot;: 2, &quot;name&quot;: &quot;Nvme0n1&quot;}</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    ]</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  }</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;}</div></div><!-- fragment --><p>Example response:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;  &quot;jsonrpc&quot;: &quot;2.0&quot;,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  &quot;id&quot;: 1,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  &quot;result&quot;: true</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;}</div></div><!-- fragment --><h2><a class="anchor" id="rpc_delete_nvmf_subsystem"></a>
delete_nvmf_subsystem method</h2>
<p>Delete an existing NVMe-oF subsystem.</p>
<h3>Parameters</h3>
<table class="doxtable">
<tr>
<th>Parameter </th><th>Optional </th><th>Type </th><th>Description  </th></tr>
<tr>
<td>nqn </td><td>Required </td><td>string </td><td>Subsystem NQN to delete. </td></tr>
</table>
<h3>Example</h3>
<p>Example request:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;  &quot;jsonrpc&quot;: &quot;2.0&quot;,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  &quot;id&quot;: 1,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  &quot;method&quot;: &quot;delete_nvmf_subsystem&quot;,</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  &quot;params&quot;: {</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    &quot;nqn&quot;: &quot;nqn.2016-06.io.spdk:cnode1&quot;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  }</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;}</div></div><!-- fragment --><p>Example response:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;  &quot;jsonrpc&quot;: &quot;2.0&quot;,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  &quot;id&quot;: 1,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  &quot;result&quot;: true</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;}</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
</div>
