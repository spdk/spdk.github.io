---
layout: post
title:  "io_uring - is it a replacement for SPDK?"
author: Jim Harris, Ben Walker, Vishal Verma
categories: release
---

Outline:

- history of SPDK (2013 NVMe driver, etc.)
- lead-in to latest io_uring developments
- reference to famous (or infamous) post from Jens' on io_uring v. SPDK

Description of io_uring

- how it's an improvement over Linux AIO
- shortcomings (still requires system calls)
	- batching can help - but that's not best for storage workloads
- still "just" a backend storage driver - storage networking or storage
  virtualization still needs to be implemented in userspace

SPDK v. io_uring benchmarking

- fio v. SPDK nvme/perf (will need batching support) v. SPDK bdev
- SPDK io_uring bdev - enables io_uring devices to be used with SPDK frontend protocols
- configuration description

Performance data

- single Xeon core, 24 SSDs
- io_uring v. SPDK NVMe driver, with and without LTO/PGO (should do LTO/PGO even with SPDK io_uring)
- w/ NVMe-oF or vhost?
- SPDK lvols v. Linux LVM io_uring?

Summary (including links to SPDK io_uring patches)

- io_uring is a huge improvement over Linux aio
- io_uring can narrow gap v. SPDK to 2-3x but only with heavy batching
- for 'normal' workloads, SPDK still shows a 4-5x advantage
