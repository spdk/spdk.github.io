---
layout: post
title:  "VTune and mempools"
author: Piotr Pelplinski
categories: news
---

VTune Amplifier now supports additional SPDK statistics.
- Mempools
- Troughput and latency histograms

To configure additional counters open “Input and Output” analysis type.
Select SPDK profiling and create custom Analysis type from this one. Enable counter API support in custom Analysis type.
Run collection for new analysis. Then, you can check global counter values on timeline of Sample count or Platform views

![SPDK](../../../../../img/_vtune1.jpg "Sample Count view")

![SPDK](../../../../../img/_vtune_global.jpg "Platform view")

Identify SPDK Mempools Saturation

The additional counters show the number of free elements in mempool, so if the counters are close to zero it means that pool is saturated.
Select the time frame with lowest value of mempools to show functions that consume those pools.

Switch to the Summary view to show trougput histogram.
![SPDK](../../../../../img/_vtune_troughput.jpg", "VTune troughput")

